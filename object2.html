<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>object2</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bulma@1.0.4/css/bulma.min.css"
    />
  </head>
  <body>
    <div>
      <button class="button is primery" onclick="All()">All</button>
      <button class="button is primery" onclick="Adults()">Adults</button>
      <button class="button is primery" onclick="minors()">Minors</button>
      <button class="button is primery" onclick="score()">score</button>
      <button class="button is primery" onclick="search()">search</button>
    </div>
    <table class="table is-bordered">
      <thead>
        <th>Name</th>
        <th>Surname</th>
        <th>
          <div style="cursor: grabbing" onclick="sortAge()">Age</div>
        </th>
        <th>Email</th>
        <th>Hobbies</th>
        <th>Score</th>
        <th>School</th>
        <th>LastLoginAt</th>
      </thead>
      <tbody id="students"></tbody>
    </table>

    <script>
      const students = [
        {
          firstName: "Бат",
          lastName: "Эрдэнэ",
          age: 17,
          score: 88,
          email: "bat.erdene17@gmail.com",
          hobbies: ["сагсан бөмбөг", "ном унших"],
          username: "bat_erd17",
          highSchool: "Улаанбаатар Элит Ахлах Сургууль",
          lastLoginAt: 1691836800000,
        },
        {
          firstName: "Ану",
          lastName: "Баяр",
          age: 16,
          score: 92,
          email: "anu.bayar16@yahoo.com",
          hobbies: ["зураг зурах", "гар бөмбөг"],
          username: "anu_bayar",
          highSchool: "Орхон Дунд Сургууль",
          lastLoginAt: 1690569600000,
        },
        {
          firstName: "Төвшин",
          lastName: "Сүх",
          age: 18,
          score: 85,
          email: "tuvshinsukh18@mail.mn",
          hobbies: ["тоглоом тоглох", "код бичих"],
          username: "tuvsukh18",
          highSchool: "Дархан Төв Ахлах Сургууль",
          lastLoginAt: 1693267200000,
        },
        {
          firstName: "Номин",
          lastName: "Баатар",
          age: 17,
          score: 91,
          email: "nomin.baatar@gmail.com",
          hobbies: ["төгөлдөр хуур тоглох", "шатар"],
          username: "nomin_b",
          highSchool: "Шинэ Эрин Ахлах Сургууль",
          lastLoginAt: 1688736000000,
        },
        {
          firstName: "Ган",
          lastName: "Тэмүүлэн",
          age: 16,
          score: 76,
          email: "gan.temuulen16@gmail.com",
          hobbies: ["хөлбөмбөг", "ном унших"],
          username: "gantemuu",
          highSchool: "Улаанбаатар Олон Улсын Сургууль",
          lastLoginAt: 1692988800000,
        },
        {
          firstName: "Солонго",
          lastName: "Эрхэмбаяр",
          age: 17,
          score: 95,
          email: "solongo.e17@hotmail.com",
          hobbies: ["мэтгэлцээн", "зураг авах"],
          username: "solongo_e",
          highSchool: "Сант Сургууль",
          lastLoginAt: 1691116800000,
        },
        {
          firstName: "Тэмка",
          lastName: "Батжаргал",
          age: 18,
          score: 82,
          email: "temka.bj@gmail.com",
          hobbies: ["сагсан бөмбөг", "гитар тоглох"],
          username: "temkabj",
          highSchool: "Мон Элит Ахлах Сургууль",
          lastLoginAt: 1692441600000,
        },
        {
          firstName: "Мөнх",
          lastName: "Цэцэг",
          age: 17,
          score: 89,
          email: "munkhtsetseg17@mail.mn",
          hobbies: ["ууланд алхах", "зураг зурах"],
          username: "munkhts",
          highSchool: "",
          lastLoginAt: 1689379200000,
        },
        {
          firstName: "Билэгт",
          lastName: "Наран",
          age: 16,
          score: 78,
          email: "bilegt.naran@yahoo.com",
          hobbies: ["код бичих", "бадминтон"],
          username: "bilegt16",
          highSchool: "Шинэ Монгол Ахлах Сургууль",
          lastLoginAt: 1691558400000,
        },
        {
          firstName: "Эрдэнэ",
          lastName: "Золбоо",
          age: 18,
          score: 94,
          email: "erdene.zolboo@gmail.com",
          hobbies: ["усанд сэлэх", "робот техник"],
          username: "zolboo18",
          highSchool: "Улаанбаатарын Олон Улсын Сургууль",
          lastLoginAt: 1689926400000,
        },
        {
          firstName: "Хулан",
          lastName: "Гантулга",
          age: 17,
          score: 87,
          email: "khulan.g17@gmail.com",
          hobbies: ["бүжиглэх", "шатар"],
          username: "khulantulga",
          highSchool: "84-р Дунд Сургууль",
          lastLoginAt: 1692192000000,
        },
        {
          firstName: "Цэнгэл",
          lastName: "Баярсайхан",
          age: 16,
          score: 80,
          email: "tsengel.bs16@gmail.com",
          hobbies: ["программ бичих", "дугуй унах"],
          username: "tsengelbs",
          highSchool: "Чингэлтэй Дүүргийн Ахлах Сургууль",
          lastLoginAt: 1688899200000,
        },
        {
          firstName: "Од",
          lastName: "Энхболд",
          age: 17,
          score: 90,
          email: "od.enkhbold@gmail.com",
          hobbies: ["математик", "кино үзэх"],
          username: "odbold17",
          highSchool: "Улаанбаатар Комплекс Сургууль",
          lastLoginAt: 1692806400000,
        },
        {
          firstName: "Саранзаяа",
          lastName: "Цолмон",
          age: 18,
          score: 93,
          email: "saranzaya.t@gmail.com",
          hobbies: ["дуулж хөгжимдөх", "бичих"],
          username: "saran_ts18",
          highSchool: "",
          lastLoginAt: 1691232000000,
        },
        {
          firstName: "Энхээ",
          lastName: "Дорж",
          age: 16,
          score: 75,
          email: "enkhee.dorj@gmail.com",
          hobbies: ["зураг зурах", "аялах"],
          username: "enkheedorj16",
          highSchool: "52-р Сургууль",
          lastLoginAt: 1689216000000,
        },
        {
          firstName: "Тунгалаг",
          lastName: "Энхжаргал",
          age: 17,
          score: 83,
          email: "tungalag.enkh@gmail.com",
          hobbies: ["гар бөмбөг", "түүх сонирхох"],
          username: "tunga_enk",
          highSchool: "Нарлаг Ахлах Сургууль",
          lastLoginAt: 1691961600000,
        },
        {
          firstName: "Баяр",
          lastName: "Амар",
          age: 18,
          score: 88,
          email: "bayar.amar@gmail.com",
          hobbies: ["теннис", "ном унших"],
          username: "bayaramar18",
          highSchool: "Энх Тайван Ахлах Сургууль",
          lastLoginAt: 1690310400000,
        },
        {
          firstName: "Дэлгэр",
          lastName: "Болд",
          age: 16,
          score: 79,
          email: "delger.bold@mail.mn",
          hobbies: ["каратэ", "хөгжим сонсох"],
          username: "delgerbold",
          highSchool: "1-р Ахлах Сургууль",
          lastLoginAt: 1689504000000,
        },
        {
          firstName: "Зулаа",
          lastName: "Оюун",
          age: 17,
          score: 91,
          email: "zulaa.oyun@gmail.com",
          hobbies: ["зураг авах", "код бичих"],
          username: "zuloyun17",
          highSchool: "Монгол Модерн Сургууль",
          lastLoginAt: 1692672000000,
        },
        {
          firstName: "Нарантуяа",
          lastName: "Алтан",
          age: 18,
          score: 96,
          email: "narantuya.altan@gmail.com",
          hobbies: ["биологи", "мэтгэлцээн"],
          username: "nara.altan",
          highSchool: "Улаанбаатар Элит Сургууль",
          lastLoginAt: 1690099200000,
        },
      ];

      function generateTableROw(students) {
        const result = `
                            <tr>
                    <td>${student.firstName.toUpperCase()}</td>
                    <td>${student.lastName}</td>
                    <td>${student.age}</td>
                    <td>${student.email}</td>
                    <td>${student.hobbies.join("  ,  ")}</td>
                    <td>${student.score}</td>
                    <td>${
                      student.highSchool
                        ? student.highSchool
                        : '<span style="opacity:30%">not available</span>'
                    }</td>
                    <td>${student.lastLoginAt}</td>
                </tr`;
        return result;
      }
      function All() {
        let output = "";
        for (let i = 0; i < students.length; i++) {
          if (students[i].age > 1) {
            output += generateTableROw(students[i]);
          }
        }
        document.getElementById("students").innerHTML = output;
      }

      function Adults() {
        let output = "";
        for (let i = 0; i < students.length; i++) {
          if (students[i].age >= 21) {
            output += generateTableROw(students[i]);
          }
        }
        document.getElementById("students").innerHTML = output;
      }
      function minors() {
        let output = "";
        for (let i = 0; i < students.length; i++) {
          if (students[i].age <= 21) {
            output += generateTableROw(students[i]);
          }
        }
        document.getElementById("students").innerHTML = output;
      }
      function score() {
        let output = "";
        const avg =
          (students[i].scores[0] +
            students[i].scores[1] +
            students[i].scores.length -
            1) /
          3;
        for (let i = 0; i < students.length; i++) {
          output === avg.math.trunc();
        }
        document.getElementById("students").innerHTML = output;
      }
      function search() {
        const query = prompt("Search query");
        let output = "";
        for (let i = 0; i < students.length; i++) {
          const lowername = students[i].firstName.toLowerCase();
          const lowerQuery = query.toLowerCase();
          const lowerEmail = students[i].email.toLowerCase();
          if (lowername.includes(lowerQuery) || lowerEmail.includes(lowerQuery))
            output += generateTableROw(students[i]);
        }
        document.getElementById("students").innerHTML = output;
      }

      let isSortingAgeAsc = true;
      const sortAge = () => {
        const sortedNers = students.sort((a, b) => {
          if (sortAge) {
            return a.age - b.age;
          } else {
            return b.age - a.age;
          }
        });
        isSortingAgeAsc = !isSortingAgeAsc;
        const output = sortedNers
          .map((student, index) => generateTableROw(index, student))
          .join("");

        document.getElementById("students").innerHTML = output;
      };
      function date() {
        forEach((student) => {
          student.lastLoginAtISO = new Date(student.lastLoginAt).toISOString();
        });

        console.log(students[0].lastLoginAtISO);
      }
    </script>
  </body>
</html>
